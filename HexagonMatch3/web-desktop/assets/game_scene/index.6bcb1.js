window.__require=function e(t,o,n){function i(a,c){if(!o[a]){if(!t[a]){var s=a.split("/");if(s=s[s.length-1],!t[s]){var p="function"==typeof __require&&__require;if(!c&&p)return p(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var l=o[a]={exports:{}};t[a][0].call(l.exports,function(e){return i(t[a][1][e]||e)},l,l.exports,e,t,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({GameDefines:[function(e,t,o){"use strict";cc._RF.push(t,"22703ZCA89Gv6LhWkimYUQv","GameDefines"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},e._instance=null,e}();o.default=n,cc._RF.pop()},{}],GameLayerStateBase:[function(e,t,o){"use strict";cc._RF.push(t,"45f99EZ8V9IoY5zv4m15Gwj","GameLayerStateBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GameLayerStateType=void 0;var r,a=e("../../../../../scripts/Frameworks/EWS/FSM/State");(function(e){e[e.None=0]="None",e[e.Create=1]="Create",e[e.Inlay=2]="Inlay",e[e.Match=3]="Match",e[e.Meger=4]="Meger",e[e.GameOver=5]="GameOver"})(r=o.GameLayerStateType||(o.GameLayerStateType={}));var c=function(e){function t(t){var o=e.call(this)||this;return o._type=r.None,o._type=t,o.reset(),o}return i(t,e),t.prototype.getType=function(){return this._type},t.prototype.reset=function(){},t.prototype.enter=function(){},t.prototype.update=function(){},t.prototype.exit=function(){},t.prototype.onMessage=function(){return!1},t.prototype.onTouchStart=function(){},t.prototype.onTouchMove=function(){},t.prototype.onTouchEnd=function(){},t.prototype.onTouchCancel=function(){},t}(a.default);o.default=c,cc._RF.pop()},{"../../../../../scripts/Frameworks/EWS/FSM/State":void 0}],GameLayerStateCreate:[function(e,t,o){"use strict";cc._RF.push(t,"b0cd6ldHqJDdIV/X7YG+Mcf","GameLayerStateCreate");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./GameLayerStateBase"),a=e("./GameLayerStatePool"),c=e("../TileMap/TileMap"),s=e("../TilePiece/TilePiece"),p=e("./GameLayerStateInlay"),l=function(e){function t(){return e.call(this,r.GameLayerStateType.Create)||this}return i(t,e),t.create=function(){var e=a.default.getInstance().getState(r.GameLayerStateType.Create);return e||(e=new t),e.init(),e},t.prototype.init=function(){},t.prototype.enter=function(e){this.createTileMap(e),this.createTilePiece(e),e.setCurrentState(p.default.create())},t.prototype.createTileMap=function(e){var t=c.default.create(e);e.setTileMap(t),t.init(e)},t.prototype.createTilePiece=function(e){var t=s.default.create(e,new s.TilePieceInfo([1],0));e.setTilePiece(t)},t}(r.default);o.default=l,cc._RF.pop()},{"../TileMap/TileMap":"TileMap","../TilePiece/TilePiece":"TilePiece","./GameLayerStateBase":"GameLayerStateBase","./GameLayerStateInlay":"GameLayerStateInlay","./GameLayerStatePool":"GameLayerStatePool"}],GameLayerStateGameOver:[function(e,t,o){"use strict";cc._RF.push(t,"2204b7SjutCQYD2kEAOyYiX","GameLayerStateGameOver");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./GameLayerStateBase"),a=e("./GameLayerStatePool"),c=e("../TileMap/State/TileMapStateGameOver"),s=function(e){function t(){return e.call(this,r.GameLayerStateType.GameOver)||this}return i(t,e),t.create=function(){var e=a.default.getInstance().getState(r.GameLayerStateType.GameOver);return e||(e=new t),e.init(),e},t.prototype.init=function(){},t.prototype.enter=function(e){e.getTileMap().setCurrentState(c.default.create()),e.getDelegate()&&e.getDelegate().onGameOver(e)},t}(r.default);o.default=s,cc._RF.pop()},{"../TileMap/State/TileMapStateGameOver":"TileMapStateGameOver","./GameLayerStateBase":"GameLayerStateBase","./GameLayerStatePool":"GameLayerStatePool"}],GameLayerStateInlay:[function(e,t,o){"use strict";cc._RF.push(t,"004b93mgOBGJ4y2ukuHlCbA","GameLayerStateInlay");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./GameLayerStateBase"),a=e("./GameLayerStatePool"),c=e("../TilePiece/TilePiece"),s=e("./GameLayerStateMatch"),p=e("../TileMap/State/TileMapStateGameOver"),l=e("../TileMap/State/TileMapStateInlay"),u=e("./GameLayerStateGameOver"),f=function(e){function t(){var t=e.call(this,r.GameLayerStateType.Inlay)||this;return t._touchStartPos=cc.v2(0,0),t._tilePieceMoved=!1,t}return i(t,e),t.create=function(){var e=a.default.getInstance().getState(r.GameLayerStateType.Inlay);return e||(e=new t),e.init(),e},t.prototype.init=function(){},t.prototype.enter=function(e){e.getTileMap().setCurrentState(l.default.create()),this.resetTilePiece(e),e.getTileMap().haveEnoughSlotForTilePiece(e.getTilePiece())||(e.getTileMap().setCurrentState(p.default.create()),e.setCurrentState(u.default.create()))},t.prototype.onTouchStart=function(e,t){var o=e.getTilePiece().node.parent.convertToNodeSpaceAR(t.getLocation());this._touchStartPos=cc.v2(o.x,o.y),this._tilePieceMoved=!1,e.getTilePiece().node.stopActionByTag(1001),e.getTilePiece().setPosition(cc.v2(0,0))},t.prototype.onTouchMove=function(e,t){var o=e.getTilePiece().node.parent.convertToNodeSpaceAR(t.getLocation()),n=cc.v2(o.x,o.y).sub(this._touchStartPos);n.magSqr()>100&&(this._tilePieceMoved=!0),e.getTilePiece().setPosition(n)},t.prototype.onTouchEnd=function(e){if(this._tilePieceMoved){var t=e.getTileMap().insertTilePiece(e.getTilePiece());t.length>0?(this.hidePiece(e),e.setCurrentState(s.default.create(t))):this.moveTilePieceBack(e)}else e.getTilePiece().rotate()},t.prototype.onTouchCancel=function(e,t){this.onTouchEnd(e,t)},t.prototype.moveTilePieceBack=function(e){var t=cc.moveTo(.25,cc.v2(0,0)).easing(cc.easeOut(2));t.setTag(1001),e.getTilePiece().node.stopActionByTag(1001),e.getTilePiece().node.runAction(t)},t.prototype.resetTilePiece=function(e){var t=[];if(Math.floor(21*Math.random())<6){var o=Math.floor(6*Math.random()+1);t.push(o)}else{for(var n=Math.floor(4*Math.random()+1),i=0;(i=Math.floor(4*Math.random()+1))==n;);t.push(n),t.push(i)}var r=Math.floor(6*Math.random()),a=e.getTilePiece();a.node.active=!0,a.setTilePieceInfo(new c.TilePieceInfo(t,r)),a.setPosition(cc.v2(0,0))},t.prototype.hidePiece=function(e){e.getTilePiece().node.active=!1},t}(r.default);o.default=f,cc._RF.pop()},{"../TileMap/State/TileMapStateGameOver":"TileMapStateGameOver","../TileMap/State/TileMapStateInlay":"TileMapStateInlay","../TilePiece/TilePiece":"TilePiece","./GameLayerStateBase":"GameLayerStateBase","./GameLayerStateGameOver":"GameLayerStateGameOver","./GameLayerStateMatch":"GameLayerStateMatch","./GameLayerStatePool":"GameLayerStatePool"}],GameLayerStateMachine:[function(e,t,o){"use strict";cc._RF.push(t,"d8439MFdf1GYayZulP5Q0JV","GameLayerStateMachine");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../../scripts/Frameworks/EWS/FSM/SimpleStateMachine"),a=e("./GameLayerStatePool"),c=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.create=function(e){return new t(e)},t.prototype.setCurrentState=function(t){var o=this.getCurrentState();e.prototype.setCurrentState.call(this,t),a.default.getInstance().putState(o)},t}(r.default);o.default=c,cc._RF.pop()},{"../../../../../scripts/Frameworks/EWS/FSM/SimpleStateMachine":void 0,"./GameLayerStatePool":"GameLayerStatePool"}],GameLayerStateMatch:[function(e,t,o){"use strict";cc._RF.push(t,"3773d6acAlMVpUhFP55edY4","GameLayerStateMatch");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./GameLayerStateBase"),a=e("./GameLayerStatePool"),c=e("../TileMap/State/TileMapStateCheckMatch"),s=function(e){function t(){var t=e.call(this,r.GameLayerStateType.Match)||this;return t._updateLogicalPositions=[],t}return i(t,e),t.create=function(e){var o=a.default.getInstance().getState(r.GameLayerStateType.Match);return o||(o=new t),o.init(e),o},t.prototype.init=function(e){this._updateLogicalPositions=e},t.prototype.enter=function(e){e.getTileMap().setCurrentState(c.default.create(this._updateLogicalPositions))},t}(r.default);o.default=s,cc._RF.pop()},{"../TileMap/State/TileMapStateCheckMatch":"TileMapStateCheckMatch","./GameLayerStateBase":"GameLayerStateBase","./GameLayerStatePool":"GameLayerStatePool"}],GameLayerStateMeger:[function(e,t,o){"use strict";cc._RF.push(t,"c21fapf8nxPzIns3gqda/mi","GameLayerStateMeger");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./GameLayerStateBase"),a=e("./GameLayerStatePool"),c=e("../TileMap/State/TileMapStateMeger"),s=function(e){function t(){var t=e.call(this,r.GameLayerStateType.Meger)||this;return t._megerPaths=[],t}return i(t,e),t.create=function(e){var o=a.default.getInstance().getState(r.GameLayerStateType.Meger);return o||(o=new t),o.init(e),o},t.prototype.init=function(e){this._megerPaths=e},t.prototype.enter=function(e){e.getTileMap().setCurrentState(c.default.create(this._megerPaths))},t}(r.default);o.default=s,cc._RF.pop()},{"../TileMap/State/TileMapStateMeger":"TileMapStateMeger","./GameLayerStateBase":"GameLayerStateBase","./GameLayerStatePool":"GameLayerStatePool"}],GameLayerStatePool:[function(e,t,o){"use strict";cc._RF.push(t,"bd9a8A1wGdED5bQhVBNMX90","GameLayerStatePool");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=function(e){function t(){return e.call(this)||this}return i(t,e),t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.test=function(){},t._instance=null,t}(e("../../../../../scripts/Frameworks/EWS/FSM/StatePool").default);o.default=r,cc._RF.pop()},{"../../../../../scripts/Frameworks/EWS/FSM/StatePool":void 0}],GameLayer:[function(e,t,o){"use strict";cc._RF.push(t,"1c200fgzTVGuZfgJ8kC8mA/","GameLayer");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./State/GameLayerStateMachine"),c=e("./State/GameLayerStateCreate"),s=e("../../../../scripts/Defines/Defines"),p=e("../../../../scripts/Frameworks/EWS/World/WorldBase"),l=e("../../../../scripts/Frameworks/AssetCache/AssetCache"),u=cc._decorator,f=u.ccclass,h=u.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tileMapRoot=null,t.tilePieceRoot=null,t._delegate=null,t._tileMap=null,t._tilePiece=null,t._stateMachine=null,t}var o;return i(t,e),o=t,t.create=function(){var e=null,t=l.default.getInstance().getAssetSync(s.AssetBundleID.GameScene,"prefab/game_layer/GameLayer",cc.Prefab);return t&&(e=cc.instantiate(t)),e?(e.setPosition(cc.v2(0,0)),e.getComponent(o)):null},t.prototype.getDelegate=function(){return this._delegate},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getTileMap=function(){return this._tileMap},t.prototype.setTileMap=function(e){this._tileMap&&(this._tileMap.node.destroy(),this._tilePiece=null),e&&(this._tileMap=e,this._tileMap.setGameLayer(this),this.tileMapRoot.addChild(this._tileMap.node))},t.prototype.getTilePiece=function(){return this._tilePiece},t.prototype.setTilePiece=function(e){this._tilePiece&&(this._tilePiece.node.destroy(),this._tilePiece=null),e&&(this._tilePiece=e,this.tilePieceRoot.addChild(this._tilePiece.node))},t.prototype.getCurrentState=function(){return this._stateMachine.getCurrentState()},t.prototype.setCurrentState=function(e){this._stateMachine.setCurrentState(e)},t.prototype.onTouchStart=function(e){this.getCurrentState().onTouchStart(this,e)},t.prototype.onTouchMove=function(e){this.getCurrentState().onTouchMove(this,e)},t.prototype.onTouchEnd=function(e){this.getCurrentState().onTouchEnd(this,e)},t.prototype.onTouchCancel=function(e){this.getCurrentState().onTouchCancel(this,e)},t.prototype.init=function(){this._stateMachine||(this._stateMachine=a.default.create(this),this.setCurrentState(c.default.create()),this.tilePieceRoot.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.tilePieceRoot.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.tilePieceRoot.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.tilePieceRoot.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this))},r([h(cc.Node)],t.prototype,"tileMapRoot",void 0),r([h(cc.Node)],t.prototype,"tilePieceRoot",void 0),o=r([f],t)}(p.default);o.default=y,cc._RF.pop()},{"../../../../scripts/Defines/Defines":void 0,"../../../../scripts/Frameworks/AssetCache/AssetCache":void 0,"../../../../scripts/Frameworks/EWS/World/WorldBase":void 0,"./State/GameLayerStateCreate":"GameLayerStateCreate","./State/GameLayerStateMachine":"GameLayerStateMachine"}],GameOverLayer:[function(e,t,o){"use strict";cc._RF.push(t,"7e0e26l3qVFE6d9+alFkiSS","GameOverLayer");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../../scripts/Defines/Defines"),c=e("../../../../scripts/Frameworks/IGame/IGame"),s=e("../../../../scripts/Frameworks/LayerDirector/LayerBase"),p=cc._decorator,l=p.ccclass,u=p.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backToMainBnt=null,t.replayBtn=null,t._delegate=null,t}var o;return i(t,e),o=t,t.show=function(e,t){c.default.getInstance().addLayerWithPrefab(a.AssetBundleID.GameScene,"prefab/ui_layer/GameOverLayer",o.LayerName,e,function(e,o){t&&t(e,o)})},t.prototype.getLayerName=function(){return o.LayerName},t.prototype.getDelegate=function(){return this._delegate},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.onLayerLoad=function(){this.backToMainBnt.on(cc.Node.EventType.TOUCH_END,this.onBackToMainBtn,this),this.replayBtn.on(cc.Node.EventType.TOUCH_END,this.onReplayBtn,this)},t.prototype.onLayerEnable=function(){},t.prototype.onLayerEnter=function(){},t.prototype.onLayerStart=function(){},t.prototype.onLayerUpdate=function(){},t.prototype.onLayerExit=function(){},t.prototype.onLayerDisable=function(){},t.prototype.onLayerDestroy=function(){},t.prototype.onBackToMainBtn=function(){this.close(),this._delegate&&this._delegate.backToMain(this)},t.prototype.onReplayBtn=function(){this.close(),this._delegate&&this._delegate.replay(this)},t.LayerName="GameOverLayer",r([u(cc.Node)],t.prototype,"backToMainBnt",void 0),r([u(cc.Node)],t.prototype,"replayBtn",void 0),o=r([l],t)}(s.default);o.default=f,cc._RF.pop()},{"../../../../scripts/Defines/Defines":void 0,"../../../../scripts/Frameworks/IGame/IGame":void 0,"../../../../scripts/Frameworks/LayerDirector/LayerBase":void 0}],GameSceneStateBase:[function(e,t,o){"use strict";cc._RF.push(t,"4838abA8WROVJIy56FqoqcL","GameSceneStateBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GameSceneStateType=void 0;var r,a=e("../../../../scripts/Frameworks/EWS/FSM/State");(function(e){e[e.None=0]="None",e[e.Create=1]="Create",e[e.Playing=2]="Playing",e[e.GameOver=3]="GameOver"})(r=o.GameSceneStateType||(o.GameSceneStateType={}));var c=function(e){function t(t){var o=e.call(this)||this;return o._type=r.None,o._type=t,o.reset(),o}return i(t,e),t.prototype.getType=function(){return this._type},t.prototype.reset=function(){},t.prototype.enter=function(){},t.prototype.update=function(){},t.prototype.exit=function(){},t.prototype.onMessage=function(){return!1},t.prototype.onTouchStart=function(){},t.prototype.onTouchMove=function(){},t.prototype.onTouchEnd=function(){},t.prototype.onTouchCancel=function(){},t}(a.default);o.default=c,cc._RF.pop()},{"../../../../scripts/Frameworks/EWS/FSM/State":void 0}],GameSceneStateCreate:[function(e,t,o){"use strict";cc._RF.push(t,"1ceab/W5mFD858n0OlbOuHx","GameSceneStateCreate");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./GameSceneStateBase"),a=e("./GameSceneStatePool"),c=e("../GameLayer/GameLayer"),s=e("./GameSceneStatePlaying"),p=function(e){function t(){return e.call(this,r.GameSceneStateType.Create)||this}return i(t,e),t.create=function(){var e=a.default.getInstance().getState(r.GameSceneStateType.Create);return e||(e=new t),e.init(),e},t.prototype.init=function(){},t.prototype.enter=function(e){this.createGameLayer(e),e.setCurrentState(s.default.create())},t.prototype.createGameLayer=function(e){var t=c.default.create();e.setGameLayer(t),t.init()},t}(r.default);o.default=p,cc._RF.pop()},{"../GameLayer/GameLayer":"GameLayer","./GameSceneStateBase":"GameSceneStateBase","./GameSceneStatePlaying":"GameSceneStatePlaying","./GameSceneStatePool":"GameSceneStatePool"}],GameSceneStateMachine:[function(e,t,o){"use strict";cc._RF.push(t,"03fbbSBOdxBsp3+hYpVPst4","GameSceneStateMachine");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../scripts/Frameworks/EWS/FSM/SimpleStateMachine"),a=e("./GameSceneStatePool"),c=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.create=function(e){return new t(e)},t.prototype.setCurrentState=function(t){var o=this.getCurrentState();e.prototype.setCurrentState.call(this,t),a.default.getInstance().putState(o)},t}(r.default);o.default=c,cc._RF.pop()},{"../../../../scripts/Frameworks/EWS/FSM/SimpleStateMachine":void 0,"./GameSceneStatePool":"GameSceneStatePool"}],GameSceneStateOver:[function(e,t,o){"use strict";cc._RF.push(t,"20cc4bUv4BKDb3Effr3Cdr5","GameSceneStateOver");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./GameSceneStateBase"),a=e("./GameSceneStatePool"),c=e("../UILayer/GameOverLayer"),s=function(e){function t(){return e.call(this,r.GameSceneStateType.GameOver)||this}return i(t,e),t.create=function(){var e=a.default.getInstance().getState(r.GameSceneStateType.GameOver);return e||(e=new t),e.init(),e},t.prototype.init=function(){},t.prototype.enter=function(e){c.default.show(null,function(t,o){o.setDelegate(e)})},t}(r.default);o.default=s,cc._RF.pop()},{"../UILayer/GameOverLayer":"GameOverLayer","./GameSceneStateBase":"GameSceneStateBase","./GameSceneStatePool":"GameSceneStatePool"}],GameSceneStatePlaying:[function(e,t,o){"use strict";cc._RF.push(t,"ccd64FZyGlB94/OpkUAQyKE","GameSceneStatePlaying");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./GameSceneStateBase"),a=e("./GameSceneStatePool"),c=function(e){function t(){return e.call(this,r.GameSceneStateType.Playing)||this}return i(t,e),t.create=function(){var e=a.default.getInstance().getState(r.GameSceneStateType.Playing);return e||(e=new t),e.init(),e},t.prototype.init=function(){},t}(r.default);o.default=c,cc._RF.pop()},{"./GameSceneStateBase":"GameSceneStateBase","./GameSceneStatePool":"GameSceneStatePool"}],GameSceneStatePool:[function(e,t,o){"use strict";cc._RF.push(t,"69532+OOLpGypwpTH+C347i","GameSceneStatePool");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=function(e){function t(){return e.call(this)||this}return i(t,e),t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.test=function(){},t._instance=null,t}(e("../../../../scripts/Frameworks/EWS/FSM/StatePool").default);o.default=r,cc._RF.pop()},{"../../../../scripts/Frameworks/EWS/FSM/StatePool":void 0}],GameScene:[function(e,t,o){"use strict";cc._RF.push(t,"31b85mCwPRHiKNp9lazyN59","GameScene");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GameSceneEnterParam=void 0;var a=e("./UILayer/PauseLayer"),c=e("./State/GameSceneStateMachine"),s=e("./State/GameSceneStateCreate"),p=e("./State/GameSceneStateOver"),l=e("../../../scripts/Frameworks/SceneDirector/SceneBase"),u=e("../../../scripts/Frameworks/IGame/IGame"),f=e("../../../scripts/Defines/Defines"),h=e("../../../scripts/Frameworks/SceneDirector/PreloadAssetInfo"),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(e("../../../scripts/Frameworks/SceneDirector/SceneEnterParamBase").default);o.GameSceneEnterParam=y;var _=cc._decorator,d=_.ccclass,S=_.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameLayerRoot=null,t.pauseBtn=null,t._gameLayer=null,t._stateMachine=null,t}return i(t,e),t.prototype.getSceneName=function(){return f.SceneName.GameScene},t.prototype.getGameLayer=function(){return this._gameLayer},t.prototype.setGameLayer=function(e){this._gameLayer&&(this._gameLayer.node.destroy(),this._gameLayer=null),e&&(this._gameLayer=e,this._gameLayer.setDelegate(this),this.gameLayerRoot.addChild(this._gameLayer.node))},t.prototype.getCurrentState=function(){return this._stateMachine.getCurrentState()},t.prototype.setCurrentState=function(e){this._stateMachine.setCurrentState(e)},t.prototype.onSceneLoad=function(){},t.prototype.onSceneEnable=function(){},t.prototype.onSceneEnter=function(){this._stateMachine=c.default.create(this),this.setCurrentState(s.default.create()),this.pauseBtn.on(cc.Node.EventType.TOUCH_END,this.onPauseBtn,this)},t.prototype.onSceneStart=function(){},t.prototype.onSceneUpdate=function(){},t.prototype.onSceneDisable=function(){},t.prototype.onSceneExit=function(){},t.prototype.onSceneDestroy=function(){},t.prototype.onPauseBtn=function(){a.default.show(null,function(){})},t.prototype.replay=function(){this.setCurrentState(s.default.create())},t.prototype.onReadyForNextPiece=function(){},t.prototype.onGameOver=function(){this.setCurrentState(p.default.create())},t.prototype.backToMain=function(){var e=h.default.create();e.extiBundles=[f.AssetBundleID.GameScene],e.enterBundles[f.AssetBundleID.MainScene]=[],u.default.getInstance().replaceSceneWithSwitchScene(e,f.SceneName.MainScene)},r([S(cc.Node)],t.prototype,"gameLayerRoot",void 0),r([S(cc.Node)],t.prototype,"pauseBtn",void 0),r([d],t)}(l.default);o.default=v,cc._RF.pop()},{"../../../scripts/Defines/Defines":void 0,"../../../scripts/Frameworks/IGame/IGame":void 0,"../../../scripts/Frameworks/SceneDirector/PreloadAssetInfo":void 0,"../../../scripts/Frameworks/SceneDirector/SceneBase":void 0,"../../../scripts/Frameworks/SceneDirector/SceneEnterParamBase":void 0,"./State/GameSceneStateCreate":"GameSceneStateCreate","./State/GameSceneStateMachine":"GameSceneStateMachine","./State/GameSceneStateOver":"GameSceneStateOver","./UILayer/PauseLayer":"PauseLayer"}],MegerPath:[function(e,t,o){"use strict";cc._RF.push(t,"1b079J1PdNHu4rXHymbykYI","MegerPath"),Object.defineProperty(o,"__esModule",{value:!0}),o.MergePathNode=void 0;var n=function(){function e(e,t){this.fromIndex=0,this.position=cc.v2(0,0),this.fromIndex=e,this.position=t}return e.create=function(t,o){return new e(t,o)},e}();o.MergePathNode=n;var i=function(){function e(e,t){this.nodes=[],this.megerTileLevel=0,this.nodes=e,this.megerTileLevel=t}return e.create=function(t,o){return new e(t,o)},e.prototype.findIndex=function(e){return this.nodes.findIndex(function(t){return t.position.x==e.x&&t.position.y==e.y})},e.prototype.isContainPos=function(e){return-1!=this.findIndex(e)},e.prototype.getMegerPosition=function(){return this.nodes[0].position},e}();o.default=i,cc._RF.pop()},{}],PauseLayer:[function(e,t,o){"use strict";cc._RF.push(t,"9cd0bFpXQhKq67bwhM+K5z8","PauseLayer");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../../scripts/Defines/Defines"),c=e("../../../../scripts/Frameworks/IGame/IGame"),s=e("../../../../scripts/Frameworks/LayerDirector/LayerBase"),p=e("../../../../scripts/Frameworks/SceneDirector/PreloadAssetInfo"),l=cc._decorator,u=l.ccclass,f=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.giveUpBtn=null,t.resumeBtn=null,t}var o;return i(t,e),o=t,t.show=function(e,t){c.default.getInstance().addLayerWithPrefab(a.AssetBundleID.GameScene,"prefab/ui_layer/PauseLayer",o.LayerName,e,function(e,o){t&&t(e,o)})},t.prototype.getLayerName=function(){return o.LayerName},t.prototype.onLayerLoad=function(){this.giveUpBtn.on(cc.Node.EventType.TOUCH_END,this.onGiveUpBtn,this),this.resumeBtn.on(cc.Node.EventType.TOUCH_END,this.onResumeBtn,this)},t.prototype.onLayerEnable=function(){},t.prototype.onLayerEnter=function(){},t.prototype.onLayerStart=function(){},t.prototype.onLayerUpdate=function(){},t.prototype.onLayerExit=function(){},t.prototype.onLayerDisable=function(){},t.prototype.onLayerDestroy=function(){},t.prototype.onGiveUpBtn=function(){var e=p.default.create();e.extiBundles=[a.AssetBundleID.GameScene],e.enterBundles[a.AssetBundleID.MainScene]=[],c.default.getInstance().replaceSceneWithSwitchScene(e,a.SceneName.MainScene)},t.prototype.onResumeBtn=function(){this.close()},t.LayerName="PauseLayer",r([f(cc.Node)],t.prototype,"giveUpBtn",void 0),r([f(cc.Node)],t.prototype,"resumeBtn",void 0),o=r([u],t)}(s.default);o.default=h,cc._RF.pop()},{"../../../../scripts/Defines/Defines":void 0,"../../../../scripts/Frameworks/IGame/IGame":void 0,"../../../../scripts/Frameworks/LayerDirector/LayerBase":void 0,"../../../../scripts/Frameworks/SceneDirector/PreloadAssetInfo":void 0}],TileBase:[function(e,t,o){"use strict";cc._RF.push(t,"b3687moSN1Na6mUKzqVGGq4","TileBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.TileType=void 0;var a,c=e("../../../../../scripts/Frameworks/EWS/Entity/EntityBase");(function(e){e[e.None=0]="None",e[e.Tile=1]="Tile",e[e.Slot=2]="Slot"})(a=o.TileType||(o.TileType={}));var s=cc._decorator,p=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._type=a.None,t._position=cc.v2(0,0),t}return i(t,e),t.prototype.getType=function(){return this._type},t.prototype.initWithType=function(t,o){e.prototype.initEntity.call(this,t),this._type=o},t.prototype.getLogicalPosition=function(){return this._position},t.prototype.setLogicalPostion=function(e){this._position=e},r([p],t)}(c.default));o.default=l,cc._RF.pop()},{"../../../../../scripts/Frameworks/EWS/Entity/EntityBase":void 0}],TileMapStateBase:[function(e,t,o){"use strict";cc._RF.push(t,"27033KvVBlLaaTmMD/hYlyd","TileMapStateBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.TileMapStateType=void 0;var r,a=e("../../../../../../scripts/Frameworks/EWS/FSM/State");(function(e){e[e.None=0]="None",e[e.Create=1]="Create",e[e.Inlay=2]="Inlay",e[e.CheckMatch=3]="CheckMatch",e[e.Meger=4]="Meger",e[e.GameOver=5]="GameOver"})(r=o.TileMapStateType||(o.TileMapStateType={}));var c=function(e){function t(t){var o=e.call(this)||this;return o._type=r.None,o._type=t,o.reset(),o}return i(t,e),t.prototype.getType=function(){return this._type},t.prototype.reset=function(){},t.prototype.enter=function(){},t.prototype.update=function(){},t.prototype.exit=function(){},t.prototype.onMessage=function(){return!1},t}(a.default);o.default=c,cc._RF.pop()},{"../../../../../../scripts/Frameworks/EWS/FSM/State":void 0}],TileMapStateCheckMatch:[function(e,t,o){"use strict";cc._RF.push(t,"13205hSmTpOM7ETVeVRwV4d","TileMapStateCheckMatch");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./TileMapStateBase"),a=e("./TileMapStatePool"),c=e("../../State/GameLayerStateInlay"),s=e("../../GameDefines/MegerPath"),p=e("../../State/GameLayerStateMeger"),l=function(e){function t(){var t=e.call(this,r.TileMapStateType.CheckMatch)||this;return t._updateLogicalPositions=[],t}return i(t,e),t.create=function(e){var o=a.default.getInstance().getState(r.TileMapStateType.CheckMatch);return o||(o=new t),o.init(e),o},t.prototype.init=function(e){this._updateLogicalPositions=e},t.prototype.enter=function(e){this._updateLogicalPositions.sort(function(t,o){var n=e.getTileWithLogicalPos(t),i=e.getTileWithLogicalPos(o);return n.getLevel()-i.getLevel()});for(var t=[],o=0;o<this._updateLogicalPositions.length;o++){for(var n=this._updateLogicalPositions[o],i=!1,r=0;r<t.length;r++){var a;if((a=t[r]).isContainPos(n)){i=!0;break}}i||(a=this.getMegerPathFromPos(e,n)).megerTileLevel>0&&t.push(a)}t.length>0?e.getGameLayer().setCurrentState(p.default.create(t)):e.getGameLayer().setCurrentState(c.default.create())},t.prototype.getMegerPathFromPos=function(e,t){var o=[],n=[];o.push(s.MergePathNode.create(-1,t)),n.push(t);for(var i=0;i<o.length;i++)for(var r=o[i],a=e.getTileWithLogicalPos(r.position),c=e.getAllNeighbourPositions(r.position),p=0;p<c.length;p++){var l=c[p];if(!this.isPostionChecked(n,l)){n.push(l);var u=e.getTileWithLogicalPos(l);u&&a.getLevel()==u.getLevel()&&o.push(s.MergePathNode.create(i,l))}}var f=0;return o.length>=3&&(f=(a=e.getTileWithLogicalPos(t)).getLevel()+1),s.default.create(o,f)},t.prototype.isPostionChecked=function(e,t){return-1!=e.findIndex(function(e){return e.x==t.x&&e.y==t.y})},t}(r.default);o.default=l,cc._RF.pop()},{"../../GameDefines/MegerPath":"MegerPath","../../State/GameLayerStateInlay":"GameLayerStateInlay","../../State/GameLayerStateMeger":"GameLayerStateMeger","./TileMapStateBase":"TileMapStateBase","./TileMapStatePool":"TileMapStatePool"}],TileMapStateCreate:[function(e,t,o){"use strict";cc._RF.push(t,"d1f02OZXBlHZLEZmG04KVfR","TileMapStateCreate");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("../TileMap"),a=e("./TileMapStateBase"),c=e("../../Tile/TileSlot"),s=e("./TileMapStateInlay"),p=e("./TileMapStatePool"),l=function(e){function t(){var t=e.call(this,a.TileMapStateType.Create)||this;return t._mapSize=cc.size(0,0),t._tileSize=cc.size(0,0),t}return i(t,e),t.create=function(e,o){var n=p.default.getInstance().getState(a.TileMapStateType.Create);return n||(n=new t),n.init(e,o),n},t.prototype.init=function(e,t){this._mapSize=e,this._tileSize=t},t.prototype.enter=function(e){this.initCoordinate(e),this.initSlots(e),e.setCurrentState(s.default.create())},t.prototype.initCoordinate=function(e){var t=e.getTileRoot().getContentSize(),o=.5*(t.height-this._tileSize.height*this._mapSize.height),n=.5*(t.width-this._tileSize.width*this._mapSize.width);e.setTileSize(this._tileSize),e.setMapSize(this._mapSize),e.setOrigin(cc.v2(n+.5*this._tileSize.width,o+.5*this._tileSize.height));var i={};i[r.TileMapDirection.Right]=cc.v2(1,0),i[r.TileMapDirection.RightTop]=cc.v2(1,1),i[r.TileMapDirection.LeftTop]=cc.v2(0,1),i[r.TileMapDirection.Left]=cc.v2(-1,0),i[r.TileMapDirection.LeftBottom]=cc.v2(0,-1),i[r.TileMapDirection.RightBottom]=cc.v2(1,-1),e.setEvenRowDirectionToOffsetDict(i);var a={};a[r.TileMapDirection.Right]=cc.v2(1,0),a[r.TileMapDirection.RightTop]=cc.v2(0,1),a[r.TileMapDirection.LeftTop]=cc.v2(-1,1),a[r.TileMapDirection.Left]=cc.v2(-1,0),a[r.TileMapDirection.LeftBottom]=cc.v2(-1,-1),a[r.TileMapDirection.RightBottom]=cc.v2(0,-1),e.setOddRowDirectionToOffsetDict(a)},t.prototype.initSlots=function(e){for(var t=0;t<this._mapSize.height;t++){var o=Math.abs(Math.floor(t-this.getCenterRow())),n=0,i=this._mapSize.width;o%2==0?(n+=Math.floor(.5*o),i-=Math.floor(.5*o)):(n+=Math.floor(.5*o),i-=Math.ceil(.5*o));for(var r=n;r<i;r++){var a=c.default.create(e.getWorld());e.addSlotWithLogicalPos(a,cc.v2(r,t))}}},t.prototype.getCenterRow=function(){return Math.floor(.5*this._mapSize.height)},t.prototype.getCenterColumn=function(){return Math.floor(.5*this._mapSize.width)},t}(a.default);o.default=l,cc._RF.pop()},{"../../Tile/TileSlot":"TileSlot","../TileMap":"TileMap","./TileMapStateBase":"TileMapStateBase","./TileMapStateInlay":"TileMapStateInlay","./TileMapStatePool":"TileMapStatePool"}],TileMapStateGameOver:[function(e,t,o){"use strict";cc._RF.push(t,"b48a4I2jCpPcpi9ym5AWDVZ","TileMapStateGameOver");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./TileMapStateBase"),a=e("./TileMapStatePool"),c=function(e){function t(){return e.call(this,r.TileMapStateType.GameOver)||this}return i(t,e),t.create=function(){var e=a.default.getInstance().getState(r.TileMapStateType.GameOver);return e||(e=new t),e.init(),e},t.prototype.init=function(){},t.prototype.enter=function(){},t}(r.default);o.default=c,cc._RF.pop()},{"./TileMapStateBase":"TileMapStateBase","./TileMapStatePool":"TileMapStatePool"}],TileMapStateInlay:[function(e,t,o){"use strict";cc._RF.push(t,"0fd17Wi+KxG04DCCLiHAWEA","TileMapStateInlay");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./TileMapStateBase"),a=e("../../Tile/Tile"),c=e("./TileMapStatePool"),s=function(e){function t(){return e.call(this,r.TileMapStateType.Inlay)||this}return i(t,e),t.create=function(){var e=c.default.getInstance().getState(r.TileMapStateType.Inlay);return e||(e=new t),e.init(),e},t.prototype.init=function(){},t.prototype.inlayTilePiece=function(e,t){var o=[],n=t.getTiles();if(n.length>0){for(var i=0;i<n.length;i++){var r=(l=n[i]).node.parent.convertToWorldSpaceAR(l.getPosition()),c=e.getTileRoot().convertToNodeSpaceAR(r),s=e.getLogicalPosWithPixelPos(cc.v2(c));o.push(s)}for(i=0;i<o.length;i++){var p=o[i];if(!e.isTileSlotEmptyAtLogicalPos(p)){o=[];break}}for(i=0;i<o.length;i++){p=o[i];var l=n[i],u=a.default.create(e.getWorld(),l.getLevel());e.addTileWithLogicalPos(u,p)}}return o},t.prototype.haveEnoughSlotForTilePiece=function(e,t){for(var o=t.getLevels().length,n=e.getAllValidPositions(),i=0;i<n.length;i++){var r=n[i];if(e.isTileSlotEmptyAtLogicalPos(r)){if(1==o)return!0;if(2==o)for(var a=e.getAllNeighbourPositions(r),c=0;c<a.length;c++){var s=a[c];if(e.isTileSlotEmptyAtLogicalPos(s))return!0}}}return!1},t}(r.default);o.default=s,cc._RF.pop()},{"../../Tile/Tile":"Tile","./TileMapStateBase":"TileMapStateBase","./TileMapStatePool":"TileMapStatePool"}],TileMapStateMachine:[function(e,t,o){"use strict";cc._RF.push(t,"155e1p04NFAM4LWFZpF/4jk","TileMapStateMachine");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../../../scripts/Frameworks/EWS/FSM/SimpleStateMachine"),a=e("./TileMapStatePool"),c=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.create=function(e){return new t(e)},t.prototype.setCurrentState=function(t){var o=this.getCurrentState();e.prototype.setCurrentState.call(this,t),a.default.getInstance().putState(o)},t}(r.default);o.default=c,cc._RF.pop()},{"../../../../../../scripts/Frameworks/EWS/FSM/SimpleStateMachine":void 0,"./TileMapStatePool":"TileMapStatePool"}],TileMapStateMeger:[function(e,t,o){"use strict";cc._RF.push(t,"22d29NU1GxG/qmTE1Ldig7u","TileMapStateMeger");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./TileMapStateBase"),a=e("./TileMapStatePool"),c=e("../../Tile/Tile"),s=e("../../State/GameLayerStateMatch"),p=function(e,t){this.tileMap=e,this.megerPath=t},l=function(e,t){this.tileMap=e,this.tile=t},u=function(e){function t(){var t=e.call(this,r.TileMapStateType.Meger)||this;return t._megerPaths=[],t._pendMegerPath=[],t._pendingTiles=[],t._moveDuration=.25,t._disappearDuration=.25,t}return i(t,e),t.create=function(e){var o=a.default.getInstance().getState(r.TileMapStateType.Meger);return o||(o=new t),o.init(e),o},t.prototype.init=function(e){this._megerPaths=e},t.prototype.enter=function(e){for(var t=0;t<this._megerPaths.length;t++){var o=this._megerPaths[t];this.createNewTileMegerAnimation(e,o)}},t.prototype.exit=function(){this._megerPaths.length=0},t.prototype.createNewTileMegerAnimation=function(e,t){this._pendMegerPath.push(t);for(var o=t.nodes.length-1;o>-1;o--){var n=this.getNodeIndexesWithPathIndex(t,o);this.createOldTileMegerAnimation(e,t,n)}var i=c.default.create(e.getWorld(),t.megerTileLevel);e.addTileWithLogicalPos(i,t.getMegerPosition()),i.node.scale=0;var r=cc.delayTime(this._moveDuration),a=cc.spawn(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.fadeIn(.3)),s=cc.sequence(r,a,cc.callFunc(this.newTileFinishMeger,this,new p(e,t)));i.node.runAction(s)},t.prototype.getNodeIndexesWithPathIndex=function(e,t){for(var o=[];t>-1;){var n=e.nodes[t];o.push(t),t=n.fromIndex}return o},t.prototype.newTileFinishMeger=function(e,t){var o=t.tileMap,n=t.megerPath,i=this._pendMegerPath.indexOf(n);-1!=i&&this._pendMegerPath.splice(i,1);for(var r=[],a=0;a<this._megerPaths.length;a++){var c=this._megerPaths[a];r.push(c.getMegerPosition())}this._pendingTiles.length<=0&&o.getGameLayer().setCurrentState(s.default.create(r))},t.prototype.createOldTileMegerAnimation=function(e,t,o){var n=t.nodes[o[0]],i=e.removeTileWithLogicalPos(n.position);e.addAnimationTileWithLogicalPos(i,n.position),this._pendMegerPath.push(t);var r=[];if(o.length>1)for(var a=this._moveDuration/(o.length-1),c=1;c<o.length;c++){var s=o[c],p=t.nodes[s],u=e.getPixelPosWithLogicalPos(p.position),f=cc.moveTo(a,u);r.push(f)}else r.push(cc.delayTime(this._moveDuration));r.push(cc.spawn(cc.fadeOut(this._disappearDuration).easing(cc.easeOut(2)),cc.scaleTo(this._disappearDuration,0))),r.push(cc.callFunc(this.oldTileFinishMerge,this,new l(e,i)));var h=cc.sequence(r);i.node.runAction(h)},t.prototype.oldTileFinishMerge=function(e,t){var o=t.tileMap,n=t.tile;o.removeAnimationTile(n)},t}(r.default);o.default=u,cc._RF.pop()},{"../../State/GameLayerStateMatch":"GameLayerStateMatch","../../Tile/Tile":"Tile","./TileMapStateBase":"TileMapStateBase","./TileMapStatePool":"TileMapStatePool"}],TileMapStatePool:[function(e,t,o){"use strict";cc._RF.push(t,"48c3fiM3p1PYIAFQOl1rO0Q","TileMapStatePool");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=function(e){function t(){return e.call(this)||this}return i(t,e),t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.test=function(){},t._instance=null,t}(e("../../../../../../scripts/Frameworks/EWS/FSM/StatePool").default);o.default=r,cc._RF.pop()},{"../../../../../../scripts/Frameworks/EWS/FSM/StatePool":void 0}],TileMap:[function(e,t,o){"use strict";cc._RF.push(t,"0f2b2nDY1tP3LOovZ1JhppF","TileMap");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.TileMapDirection=void 0;var a,c=e("./State/TileMapStateMachine"),s=e("./State/TileMapStateCreate"),p=e("./State/TileMapStateBase"),l=e("../../../../../scripts/Frameworks/EWS/Entity/EntityBase"),u=e("../../../../../scripts/Frameworks/AssetCache/AssetCache"),f=e("../../../../../scripts/Defines/Defines"),h=e("../../../../../scripts/Frameworks/Utils/GameMath"),y=cc._decorator,_=y.ccclass,d=y.property;(function(e){e[e.None=0]="None",e[e.Right=1]="Right",e[e.RightTop=2]="RightTop",e[e.LeftTop=3]="LeftTop",e[e.Left=4]="Left",e[e.LeftBottom=5]="LeftBottom",e[e.RightBottom=6]="RightBottom"})(a=o.TileMapDirection||(o.TileMapDirection={}));var S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.slotRoot=null,t._gameLayer=null,t._tileSize=cc.size(90,78),t._mapSize=cc.size(7,7),t._origin=cc.v2(0,0),t._evenRowDirectionToOffsetDict={},t._oddRowDirectionToOffsetDict={},t._stateMachine=null,t._tileSlots={},t._tiles={},t}var o;return i(t,e),o=t,t.create=function(){var e=null,t=u.default.getInstance().getAssetSync(f.AssetBundleID.GameScene,"prefab/game_layer/TileMap",cc.Prefab);return t&&(e=cc.instantiate(t)),e?(e.setPosition(cc.v2(0,0)),e.getComponent(o)):null},t.prototype.init=function(t){if(null==this._stateMachine){e.prototype.initEntity.call(this,t),this._stateMachine=c.default.create(this);var o=Math.round(90*Math.sin(h.default.degreeToRadian(60)));this.setCurrentState(s.default.create(cc.size(7,7),cc.size(90,o)))}},t.prototype.getTileRoot=function(){return this.slotRoot},t.prototype.getGameLayer=function(){return this._gameLayer},t.prototype.setGameLayer=function(e){this._gameLayer=e},t.prototype.getTileSize=function(){return this._tileSize},t.prototype.setTileSize=function(e){this._tileSize=e},t.prototype.getMapSize=function(){return this._mapSize},t.prototype.setMapSize=function(e){this._mapSize=e},t.prototype.getOrigin=function(){return this._origin},t.prototype.setOrigin=function(e){this._origin=e},t.prototype.getEvenRowDirectionToOffsetDict=function(){return this._evenRowDirectionToOffsetDict},t.prototype.setEvenRowDirectionToOffsetDict=function(e){this._evenRowDirectionToOffsetDict=e},t.prototype.getOddRowDirectionToOffsetDict=function(){return this._oddRowDirectionToOffsetDict},t.prototype.setOddRowDirectionToOffsetDict=function(e){this._oddRowDirectionToOffsetDict=e},t.prototype.getCurrentState=function(){return this._stateMachine.getCurrentState()},t.prototype.setCurrentState=function(e){this._stateMachine.setCurrentState(e)},t.prototype.isSameWithCenter=function(e){return Math.floor(.5*this._mapSize.height)%2==e%2},t.prototype.getPixelPosWithLogicalPos=function(e){var t=this.isSameWithCenter(e.y),o=.5*this._tileSize.width;t&&(o=0);var n=o+e.x*this._tileSize.width,i=e.y*this._tileSize.height;return cc.v2(n,i).add(this._origin)},t.prototype.getLogicalPosWithPixelPos=function(e){var t=this._origin.sub(cc.v2(.5*this._tileSize.width,.5*this._tileSize.height)),o=e.sub(t),n=Math.floor(o.y/this._tileSize.height),i=this.isSameWithCenter(n),r=.5*this._tileSize.width;i&&(r=0);var a=Math.floor((o.x-r)/this._tileSize.width);return cc.v2(a,n)},t.prototype.getOffsetWithPositionAndDirection=function(e,t){return this.isSameWithCenter(e.y)?this._oddRowDirectionToOffsetDict[t]:this._evenRowDirectionToOffsetDict[t]},t.prototype.getAllNeighbourPositions=function(e){for(var t=[],o=[a.Right,a.RightTop,a.LeftTop,a.Left,a.LeftBottom,a.RightBottom],n=0;n<o.length;n++){var i=o[n],r=this.getOffsetWithPositionAndDirection(e,i),c=e.add(r);t.push(c)}return t},t.prototype.getKeyWithLogicalPos=function(e){return e.toString()},t.prototype.addSlotWithLogicalPos=function(e,t){this.removeSlotWithLogicalPos(t),e.setLogicalPostion(t),e.node.setPosition(this.getPixelPosWithLogicalPos(t)),this.slotRoot.addChild(e.node,0);var o=this.getKeyWithLogicalPos(t);this._tileSlots[o]=e},t.prototype.removeSlotWithLogicalPos=function(e){var t=this.getKeyWithLogicalPos(e),o=this._tileSlots[t];return o&&o.node.removeFromParent(!1),delete this._tileSlots[t],o},t.prototype.getSlotWithLogicalPos=function(e){var t=this.getKeyWithLogicalPos(e);return this._tileSlots[t]},t.prototype.getAllSlots=function(){return this._tileSlots},t.prototype.getAllValidPositions=function(){var e=[];for(var t in this._tileSlots){var o=this._tileSlots[t].getLogicalPosition();e.push(o)}return e},t.prototype.addTileWithLogicalPos=function(e,t){if(this.getSlotWithLogicalPos(t)){this.removeTileWithLogicalPos(t),e.setLogicalPostion(t),e.node.setPosition(this.getPixelPosWithLogicalPos(t)),this.slotRoot.addChild(e.node,1);var o=this.getKeyWithLogicalPos(t);this._tiles[o]=e}},t.prototype.removeTileWithLogicalPos=function(e){var t=this.getKeyWithLogicalPos(e),o=this._tiles[t];return o&&o.node.removeFromParent(!1),delete this._tiles[t],o},t.prototype.getTileWithLogicalPos=function(e){var t=this.getKeyWithLogicalPos(e);return this._tiles[t]},t.prototype.isTileSlotEmptyAtLogicalPos=function(e){return!(!this.getSlotWithLogicalPos(e)||this.getTileWithLogicalPos(e))},t.prototype.insertTilePiece=function(e){var t=this.getCurrentState();return t.getType()==p.TileMapStateType.Inlay?t.inlayTilePiece(this,e):[]},t.prototype.haveEnoughSlotForTilePiece=function(e){var t=this.getCurrentState();return t.getType()==p.TileMapStateType.Inlay&&t.haveEnoughSlotForTilePiece(this,e)},t.prototype.addAnimationTileWithLogicalPos=function(e,t){e.node.setPosition(this.getPixelPosWithLogicalPos(t)),this.slotRoot.addChild(e.node,2)},t.prototype.removeAnimationTile=function(e){e.recycle()},r([d(cc.Node)],t.prototype,"slotRoot",void 0),o=r([_],t)}(l.default);o.default=S,cc._RF.pop()},{"../../../../../scripts/Defines/Defines":void 0,"../../../../../scripts/Frameworks/AssetCache/AssetCache":void 0,"../../../../../scripts/Frameworks/EWS/Entity/EntityBase":void 0,"../../../../../scripts/Frameworks/Utils/GameMath":void 0,"./State/TileMapStateBase":"TileMapStateBase","./State/TileMapStateCreate":"TileMapStateCreate","./State/TileMapStateMachine":"TileMapStateMachine"}],TilePiece:[function(e,t,o){"use strict";cc._RF.push(t,"f022fOimUpLPZbVMwl8zMSK","TilePiece");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.TilePieceInfo=void 0;var a=e("../../../../../scripts/Defines/Defines"),c=e("../../../../../scripts/Frameworks/EWS/Entity/EntityBase"),s=e("../../../../../scripts/Frameworks/EWS/Entity/EntityNodePool"),p=e("../../../../../scripts/Frameworks/Utils/GameMath"),l=e("../Tile/Tile"),u=cc._decorator,f=u.ccclass,h=u.property,y=function(e,t){this.levels=[],this.angleIndex=0,this.levels=e,this.angleIndex=t};o.TilePieceInfo=y;var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tile1=null,t.tile2=null,t._radius=45,t._levels=[],t._angleIndex=0,t}return i(t,e),t.create=function(e,t){var o=s.default.getInstance().getEntityNode(a.AssetBundleID.GameScene,"prefab/game_layer/TilePiece","TilePiece");if(o){var n=o;return n.init(e,t),n}return null},t.prototype.getLevels=function(){return this._levels},t.prototype.setLevels=function(e){1==e.length?(this._levels=e,this.tile2.node.active=!1,this.tile1.node.active=!0):2==e.length?(this._levels=e,this.tile1.node.active=!0,this.tile1.setLevel(e[0]),this.tile2.node.active=!0,this.tile2.setLevel(e[1])):(this._levels=[],this.tile1.node.active=!1,this.tile2.node.active=!1,console.error("Tile Piece should have 1 or 2 tiles"))},t.prototype.getAngleIndex=function(){return this._angleIndex},t.prototype.setAngleIndex=function(e,t){if(void 0===t&&(t=!1),1==this._levels.length)this._angleIndex=0,this.tile1.setPosition(cc.v2(0,0)),this.tile2.setPosition(cc.v2(0,0));else{this._angleIndex=e%6;var o=p.default.degreeToRadian(-60*this._angleIndex+180),n=cc.v2(Math.cos(o)*this._radius,Math.sin(o)*this._radius),i=n.mul(-1);if(this.tile1.node.stopActionByTag(1001),this.tile2.node.stopActionByTag(1001),t){var r=cc.moveTo(.2,n).easing(cc.easeOut(2));r.setTag(1001),this.tile1.node.runAction(r);var a=cc.moveTo(.2,i).easing(cc.easeOut(2));a.setTag(1001),this.tile2.node.runAction(a)}else this.tile1.setPosition(n),this.tile2.setPosition(i)}},t.prototype.init=function(e,t){this.initEntity(e),this.setTilePieceInfo(t)},t.prototype.getTilePieceInfo=function(){var e=this._levels.slice(0),t=this._angleIndex;return new y(e,t)},t.prototype.setTilePieceInfo=function(e){this.setLevels(e.levels),this.setAngleIndex(e.angleIndex)},t.prototype.rotate=function(){this.setAngleIndex(this.getAngleIndex()+1,!0)},t.prototype.getTiles=function(){var e=[];return 1==this._levels.length?e.push(this.tile1):2==this._levels.length&&(e.push(this.tile1),e.push(this.tile2)),e},r([h(l.default)],t.prototype,"tile1",void 0),r([h(l.default)],t.prototype,"tile2",void 0),r([f],t)}(c.default);o.default=_,cc._RF.pop()},{"../../../../../scripts/Defines/Defines":void 0,"../../../../../scripts/Frameworks/EWS/Entity/EntityBase":void 0,"../../../../../scripts/Frameworks/EWS/Entity/EntityNodePool":void 0,"../../../../../scripts/Frameworks/Utils/GameMath":void 0,"../Tile/Tile":"Tile"}],TileSlot:[function(e,t,o){"use strict";cc._RF.push(t,"cd7662sZodAT6OClRY7tgnE","TileSlot");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../../../scripts/Defines/Defines"),c=e("../../../../../scripts/Frameworks/EWS/Entity/EntityNodePool"),s=e("./TileBase"),p=cc._decorator,l=p.ccclass,u=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.create=function(e){var t=c.default.getInstance().getEntityNode(a.AssetBundleID.GameScene,"prefab/game_layer/TileSlot","TileSlot");if(t){var o=t;return o.init(e),o}return null},t.prototype.init=function(e){this.initWithType(e,s.TileType.Slot)},r([l],t)}(s.default));o.default=u,cc._RF.pop()},{"../../../../../scripts/Defines/Defines":void 0,"../../../../../scripts/Frameworks/EWS/Entity/EntityNodePool":void 0,"./TileBase":"TileBase"}],Tile:[function(e,t,o){"use strict";cc._RF.push(t,"13b465qR9VD2rs13kxyDrnT","Tile");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../../../scripts/Defines/Defines"),c=e("../../../../../scripts/Frameworks/AssetCache/AssetCache"),s=e("../../../../../scripts/Frameworks/EWS/Entity/EntityNodePool"),p=e("./TileBase"),l=cc._decorator,u=l.ccclass,f=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.tile=null,t._level=o.MinLevel,t}var o;return i(t,e),o=t,t.create=function(e,t){var o=s.default.getInstance().getEntityNode(a.AssetBundleID.GameScene,"prefab/game_layer/Tile","Tile");if(o){var n=o;return n.initWithLevel(e,t),n}return null},t.prototype.start=function(){},t.prototype.getLevel=function(){return this._level},t.prototype.setLevel=function(e){this._level=Math.max(o.MinLevel,Math.min(e,o.MaxLevel)),this.label.string=this._level.toString();var t="texture/game_layer/kuaizi_"+this._level,n=c.default.getInstance().getAssetSync(a.AssetBundleID.GameScene,t,cc.SpriteFrame);n&&(this.tile.spriteFrame=n)},t.prototype.initWithLevel=function(e,t){this.initWithType(e,p.TileType.Tile),this.setLevel(t)},t.prototype.onRecycle=function(){e.prototype.onRecycle.call(this),this.node.rotation=0,this.node.scale=1,this.node.anchorX=.5,this.node.anchorY=.5,this.node.opacity=255,this.node.color=cc.color(255,255,255,255)},t.MaxLevel=7,t.MinLevel=1,r([f(cc.Label)],t.prototype,"label",void 0),r([f(cc.Sprite)],t.prototype,"tile",void 0),o=r([u],t)}(p.default);o.default=h,cc._RF.pop()},{"../../../../../scripts/Defines/Defines":void 0,"../../../../../scripts/Frameworks/AssetCache/AssetCache":void 0,"../../../../../scripts/Frameworks/EWS/Entity/EntityNodePool":void 0,"./TileBase":"TileBase"}]},{},["GameDefines","MegerPath","GameLayer","GameLayerStateBase","GameLayerStateCreate","GameLayerStateGameOver","GameLayerStateInlay","GameLayerStateMachine","GameLayerStateMatch","GameLayerStateMeger","GameLayerStatePool","TileMapStateBase","TileMapStateCheckMatch","TileMapStateCreate","TileMapStateGameOver","TileMapStateInlay","TileMapStateMachine","TileMapStateMeger","TileMapStatePool","TileMap","TilePiece","Tile","TileBase","TileSlot","GameScene","GameSceneStateBase","GameSceneStateCreate","GameSceneStateMachine","GameSceneStateOver","GameSceneStatePlaying","GameSceneStatePool","GameOverLayer","PauseLayer"]);